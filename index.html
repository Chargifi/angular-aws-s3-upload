<!DOCTYPE html>
<html>
<head lang="en">
	<meta charset="UTF-8">
	<title>Upload Example</title>
	<script type="text/javascript" src="aws-sdk-s3.js"></script>
	<script type="text/javascript" src="bower_components/angular/angular.js"></script>
	<script type="text/javascript" src="angular-s3.js"></script>
	<link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css"/>
</head>
<body ng-app="MyApp">
<div class="container">
	<div class="jumbotron">
		<h1>Angular AWS S3 Uploader</h1>

		<p class="lead">Aws S3 uploader done right.</p>
	</div>
	<br/>

	<div ng-controller="S3Ctrl">
		<form name="testForm" novalidate>
			<div class="form-group">
				<label class="col-sm-2 control-label">Upload</label>

				<div class="col-sm-10">

					<div s3 options="options" files="form.files"></div>

					<div ng-messages="testForm.inputEmail.$error" ng-show="testForm.inputEmail.$dirty || regForm.$submitted">
						<div class="alert alert-danger" ng-message="required">Это поле обязательно для заполнения.</div>
						<div class="alert alert-danger" ng-message="email">Емайл введен не правильно.</div>
						<div class="alert alert-warning" ng-message="looking">Проверяю в базе даных...</div>
						<div class="alert alert-danger" ng-message="available">Такое имя пользователя уже занято.</div>
					</div>

				</div>
			</div>
			<div class="form-group">
				<div class="col-sm-offset-2 col-sm-10">
					<button type="submit" class="btn btn-default">Save</button>
				</div>
			</div>
		</form>
		{{form.files}}
	</div>
</div>

<script type="text/javascript">
	angular.module('MyApp', ['angular.aws.s3']).controller("S3Ctrl", function($scope) {

		$scope.form = {
			files: []
		};
		$scope.options = {
			multiple:   false,
			extensions: ['png', 'jpg', 'mp4'],
			immediate:  true,
			bucket:     'private-cdn-ch',
			acl:     'public-read',
			folder:     "1/1/",
			filename:   "art_[RND]",
			filesize:   '10000000',
			region:   '10000000',
			limit:   '1',
			replace:   true,
			policy:     {
				"policy":    "eyJleHBpcmF0aW9uIjoiMjAxNi0wNS0xOFQxNjo0OToyNFoiLCJjb25kaXRpb25zIjpbeyJidWNrZXQiOiJwcml2YXRlLWNkbi1jaCJ9LFsic3RhcnRzLXdpdGgiLCIka2V5IiwiIl0seyJhY2wiOiJwdWJsaWMtcmVhZCJ9LFsiY29udGVudC1sZW5ndGgtcmFuZ2UiLDAsMTA0ODU3NjBdLFsic3RhcnRzLXdpdGgiLCIkQ29udGVudC1UeXBlIiwiIl1dfQ==",
				"signature": "pzLtBoaue15H5s4jhU7voe7YaCQ=",
				"key":       "AKIAIBUOK6TJJUEDWPBA"
			},
			policyUrl:  ''
		};

		$scope.save = function(testForm) {
			if(testForm.$invalid) {
				//return;
			}
		}
	});
</script>
</body>
</html>